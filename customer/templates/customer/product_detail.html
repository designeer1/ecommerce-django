{% extends "customer/base.html" %}

{% block content %}
<div class="container">
  <div class="row">
    <!-- Product Image -->
    <div class="col-md-5">
      <div class="card mb-4">
        <div class="card-img-top-container">
          <img src="{{ product.image_path }}" alt="{{ product.name }}" class="img-fluid">
        </div>
      </div>
    </div>

    <!-- Product Details -->
    <div class="col-md-7">
      <h2>{{ product.name }}</h2>
      <h4 class="text-success">₹ {{ product.price }}</h4>

      <!-- Dynamic Green Star Rating -->
      <div class="mb-3">
        {% for i in "12345" %}
          {% if forloop.counter <= product.rating %}
            <i class="bi bi-star-fill text-success"></i>
          {% else %}
            <i class="bi bi-star text-success"></i>
          {% endif %}
        {% endfor %}
      </div>

      <!-- Product Description -->
      <p>{{ product.description }}</p>

      <!-- Add to Cart Button -->
      <a href="{% url 'add_to_cart' product.name %}" class="btn btn-primary">
        <i class="bi bi-cart3"></i> Add to Cart
      </a>
    </div>
  </div>

  <!-- Related Products -->
 <!-- Related Products -->
{% if related_products %}
<hr>
<h4 class="mt-4 mb-3">Related Products</h4>
<div class="row">
  {% for rp in related_products %}
  <div class="col-md-3 mb-3">
    <div class="card product-card h-100">
      <div class="card-img-top-container">
        <img src="{{ rp.image_path }}" alt="{{ rp.name }}" class="img-fluid">
      </div>
      <div class="card-body text-center">
        <h6 class="card-title">{{ rp.name }}</h6>
        <p class="card-text text-success">₹ {{ rp.price }}</p>

        <!-- Star Rating for Related Products -->
        <div class="mb-2">
          {% for i in "12345" %}
            {% if forloop.counter <= rp.rating|default:5 %}
              <i class="bi bi-star-fill text-success"></i>
            {% else %}
              <i class="bi bi-star text-success"></i>
            {% endif %}
          {% endfor %}
        </div>

        <a href="{% url 'product_detail' rp.name %}" class="btn btn-sm btn-outline-primary">View</a>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endif %}

{% endblock %}
